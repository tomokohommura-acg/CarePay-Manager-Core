# E2Eテスト引継ぎドキュメント

## 現在の状態（2026-02-04）

### 完了した作業

1. **デモモード実装完了**
   - URL: `https://visit-care-salary.web.app?demo=true`
   - ログイン不要でシステムを操作可能
   - サンプルデータ（職員4名、事業所2つ、評価期間2つ）が含まれる
   - 上部にオレンジ色のデモモードバナーが表示される

2. **UI改善（本日実装）**
   - 評価履歴リストの色を`#26519f`（ネイビー）基調に変更
   - メニュー選択時の背景色を透明に（`#00c4cc/20`）
   - 職員分析に表示切り替えボタン追加（📋表/📊棒/📈線）
   - 在籍中フィルタボタンの色を`#3dcc65`に変更

3. **Playwright MCP設定済み**
   - コマンド: `claude mcp add playwright -- npx @playwright/mcp@latest`
   - 設定ファイル: `C:\Users\dxgro\.claude.json`

### 次にやること：E2Eテスト実行

Claude Code再起動後、以下のコマンドでE2Eテストを実行：

```
E2Eテスト開始
```

### テスト対象URL

- **デモモード**: https://visit-care-salary.web.app?demo=true
- **本番モード**: https://visit-care-salary.web.app

### E2Eテストチェックリスト

#### 1. 基本動作
- [ ] デモモードバナーが上部に表示される
- [ ] ログイン不要で画面が表示される
- [ ] サイドバーにデモ事業所A/Bが表示される

#### 2. 評価管理 > 職員名簿
- [ ] 職員一覧（山田太郎、佐藤花子など）が表示される
- [ ] 「給与管理」ボタンクリックでモーダルが開く
- [ ] 基本給履歴が表示される

#### 3. 評価管理 > 評価データ入力簿
- [ ] 評価期間の切り替えができる
- [ ] 勤怠・業績の入力フィールドが表示される
- [ ] 数値入力で給与計算が反映される
- [ ] 「評価を保存」ボタンが動作する

#### 4. データ管理 > 評価履歴
- [ ] 履歴一覧が`#26519f`色で表示される
- [ ] タブ切り替え（評価履歴/変更ログ）が動作する

#### 5. データ管理 > 職員分析
- [ ] 在籍中フィルタが`#3dcc65`色で表示される
- [ ] 職員選択で詳細が表示される
- [ ] 各グラフの表示切替ボタン（📋表/📊棒/📈線）が動作する
- [ ] 基本給推移グラフが表示される

#### 6. データ管理 > CSV出力
- [ ] 評価期間を選択できる
- [ ] CSVダウンロードが動作する

#### 7. システム設定（管理者メニュー）
- [ ] マスタ管理が表示される
- [ ] SmartHR連携設定が表示される
- [ ] ユーザー管理が表示される

### デモデータの構成

```
事業所:
- office-001: 訪問介護（デモ事業所A）
- office-002: 訪問看護（デモ事業所B）

職員:
- staff-001: 山田 太郎（介護福祉士）
- staff-002: 佐藤 花子（初任者研修）
- staff-003: 鈴木 一郎（介護福祉士+初任者研修）
- staff-004: 田中 美咲（資格なし）
- staff-005: 高橋 看護師（看護師）

評価期間:
- period-001/002: 訪問介護用（2024年度上期/下期）
- period-n-001/002: 訪問看護用（2024年度上期/下期）
```

### 関連ファイル

| ファイル | 役割 |
|---------|------|
| `utils/demoData.ts` | デモ用サンプルデータ |
| `App.tsx` | デモモード判定・切り替えロジック |
| `E2E_TEST_HANDOVER.md` | この引継ぎドキュメント |

### Playwright MCPで使えるコマンド

再起動後、以下のツールが使用可能：

- `browser_navigate` - URLに移動
- `browser_click` - 要素をクリック
- `browser_type` - テキスト入力
- `browser_screenshot` - スクリーンショット取得
- `browser_snapshot` - アクセシビリティスナップショット
